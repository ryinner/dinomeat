(()=>{var e={};e.id=2507,e.ids=[2507],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},58802:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},52165:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>l,pages:()=>u,routeModule:()=>m,tree:()=>c});var i=r(67096),n=r(16132),s=r(37284),a=r.n(s),o=r(32564),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let c=["",{children:["(admin)",{children:["admin",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,74935)),"/home/artem/www/dinomeat/app/(admin)/admin/categories/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,72355)),"/home/artem/www/dinomeat/app/(admin)/admin/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e),async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e),async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/home/artem/www/dinomeat/app/(admin)/admin/categories/page.tsx"],l="/(admin)/admin/categories/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(admin)/admin/categories/page",pathname:"/admin/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},37854:(e,t,r)=>{Promise.resolve().then(r.bind(r,70956)),Promise.resolve().then(r.bind(r,22611))},62939:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(53854);r(34218);var n=r(10892),s=r.n(n);function a({children:e,className:t,...r}){let n=`${s().button} ${t??""}`;return i.jsx("button",{className:n,...r,children:e})}},20457:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(53854),n=r(78053),s=r(52486),a=r(24599),o=r.n(a);function d({className:e,...t}){let r=`${o().icon} ${e}`;return i.jsx(s.G,{className:r,icon:n.Xcf,...t})}},22611:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var i=r(53854),n=r(61505),s=r(18635),a=r(34218),o=r(44556),d=r(7200),c=r(62939),u=r(20457);function l({category:e,onUpdate:t}){let[r,n]=(0,a.useState)(!1),[o,l]=(0,a.useState)(e.name);return(0,i.jsxs)("tr",{children:[i.jsx("td",{children:e.id}),i.jsx("td",{children:r?i.jsx("input",{value:o,onInput:e=>{e.target instanceof HTMLInputElement&&l(e.target.value)}}):e.name}),i.jsx("td",{children:e.published?i.jsx("span",{children:"Опубликовано"}):i.jsx(c.Z,{onClick:()=>{(0,s.W)(`/api/admin/categories/${e.id}`,{method:"PUT",body:JSON.stringify({published:!0})}).then(()=>{n(!1),t({...e,published:!0})})},children:"Опубликовать"})}),i.jsx("td",{children:r?i.jsx(d.Z,{onClick:()=>{(0,s.r)(`/api/admin/categories/${e.id}`,{method:"PUT",body:JSON.stringify({name:o})},{withMessage:!0}).then(()=>{n(!1),t({...e,name:o})})}}):i.jsx(u.Z,{onClick:()=>{n(!0)}})})]})}function p({categories:e}){let[t,r]=(0,n.O)(e),[c,u]=(0,a.useState)(null),p=e=>{r(()=>t.map(t=>t.id===e.id?e:t))};return(0,i.jsxs)("table",{children:[i.jsx("thead",{children:(0,i.jsxs)("tr",{children:[i.jsx("th",{style:{width:"5%"},children:"id"}),i.jsx("th",{style:{width:"75%"},children:"Наименование"}),i.jsx("th",{style:{width:"10%"},children:"Публикация"}),i.jsx("th",{style:{width:"10%"},children:null===c?i.jsx(o.Z,{onClick:()=>{null===c&&u("")},title:"Добавить категорию"}):(0,i.jsxs)(i.Fragment,{children:[i.jsx("input",{value:c,onInput:e=>{e.target instanceof HTMLInputElement&&u(e.target.value)}}),i.jsx(d.Z,{onClick:()=>{(0,s.r)("/api/admin/categories",{method:"POST",body:JSON.stringify({name:c})},{withMessage:!0}).then(e=>{r([e.category,...t]),u(null)})}})]})})]})}),i.jsx("tbody",{children:t.map(e=>i.jsx(l,{category:e,onUpdate:p},e.id))})]})}},10892:e=>{e.exports={button:"Button_button__OFOdO"}},74935:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,metadata:()=>l});var i=r(4656),n=r(69809),s=r(95153);let a=(0,s.createProxy)(String.raw`/home/artem/www/dinomeat/components/Private/Categories/CategoriesTable.tsx`),{__esModule:o,$$typeof:d}=a,c=a.default;var u=r(48705);let l={title:"Категории",description:"Страница редактирования категорий"};async function p({searchParams:e}){let{categories:t,pagination:r}=await (0,u.k5)({page:Number(e.page??1)});return(0,i.jsxs)(i.Fragment,{children:[i.jsx(c,{categories:t}),i.jsx(n.ZP,{...r})]})}},48705:(e,t,r)=>{"use strict";r.d(t,{CP:()=>a,k4:()=>o,k5:()=>s,yr:()=>d});var i=r(87839),n=r(36416);async function s({page:e=1}){let t=await i._B.category.findMany({skip:(e-1)*50,take:50,orderBy:{id:"desc"}}),r=await i._B.category.count();return{categories:t,pagination:(0,n.o)({page:e,limit:50,count:r})}}async function a(e){return i._B.category.findMany(e)}async function o(e){return await i._B.category.create({data:e})}async function d(e,t){return await i._B.category.update({data:t,where:{id:e}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[3271,3559,6673,2802,2198,5512],()=>r(52165));module.exports=i})();