(()=>{var e={};e.id=7578,e.ids=[7578],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},58802:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},56142:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>l,pages:()=>c,routeModule:()=>m,tree:()=>u});var n=r(67096),i=r(16132),s=r(37284),a=r.n(s),o=r(32564),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let u=["",{children:["(admin)",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,99340)),"/home/artem/www/dinomeat/app/(admin)/admin/products/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,72355)),"/home/artem/www/dinomeat/app/(admin)/admin/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e),async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e),async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/artem/www/dinomeat/app/(admin)/admin/products/page.tsx"],l="/(admin)/admin/products/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(admin)/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},39369:(e,t,r)=>{Promise.resolve().then(r.bind(r,70956)),Promise.resolve().then(r.bind(r,82553))},82553:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(53854),i=r(44556),s=r(7200),a=r(61505),o=r(18635),d=r(75548),u=r.n(d),c=r(34218);function l({products:e}){let[t,r]=(0,a.O)(e),[d,l]=(0,c.useState)(null),p=e=>{e.preventDefault(),(0,o.r)("/api/admin/products",{method:"POST",body:JSON.stringify({name:d})},{withMessage:!0}).then(e=>{r([e.product,...t]),l(null)})};return(0,n.jsxs)("table",{children:[n.jsx("thead",{children:(0,n.jsxs)("tr",{children:[n.jsx("th",{style:{width:"10%"},children:"Id"}),n.jsx("th",{style:{width:"70%"},children:"Наименование"}),n.jsx("th",{style:{width:"20%"},children:null===d?n.jsx(i.Z,{onClick:()=>{null===d&&l("")}}):(0,n.jsxs)("form",{onSubmit:p,children:[n.jsx("input",{onInput:e=>{e.target instanceof HTMLInputElement&&l(e.target.value)},value:d}),n.jsx(s.Z,{onClick:p})]})})]})}),n.jsx("tbody",{children:t.map(e=>(0,n.jsxs)("tr",{children:[n.jsx("td",{children:n.jsx(u(),{href:`/admin/products/${e.id}`,children:e.id})}),n.jsx("td",{colSpan:2,children:n.jsx(u(),{href:`/admin/products/${e.id}`,children:e.name})})]},e.id))})]})}},99340:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,metadata:()=>l});var n=r(4656),i=r(69809),s=r(95153);let a=(0,s.createProxy)(String.raw`/home/artem/www/dinomeat/components/Private/Products/ProductsTable.tsx`),{__esModule:o,$$typeof:d}=a,u=a.default;var c=r(16247);let l={title:"Продукты",description:"Страница перечисления всех продуктов"};async function p({searchParams:e}){let{page:t=1}=e,{products:r,pagination:s}=await (0,c.Fv)({page:Number(t)});return(0,n.jsxs)(n.Fragment,{children:[n.jsx(u,{products:r}),n.jsx(i.ZP,{...s})]})}},16247:(e,t,r)=>{"use strict";r.d(t,{Fv:()=>o,GJ:()=>c,WJ:()=>d,nM:()=>a,ry:()=>s,yC:()=>u});var n=r(87839),i=r(36416);async function s(e){let t=await n._B.product.create({data:{...e}});return t}async function a(e,t){let r=await n._B.product.update({...t,where:{id:e}});return r}async function o({page:e=1}){let t=await n._B.product.findMany({skip:(e-1)*50,take:50,orderBy:{id:"desc"}}),r=await n._B.product.count();return{products:t,pagination:(0,i.o)({page:e,limit:50,count:r})}}async function d({id:e}){let t=await n._B.product.findFirst({include:{images:{include:{image:!0}},seo:{include:{seo:!0}}},where:{id:e}}),r=await n._B.property.findMany({include:{products:{include:{value:!0},where:{productId:e}},values:!0}}),i=await n._B.size.findMany({include:{products:{where:{productId:e}}}});return{...t,properties:r,sizes:i}}function u({query:e}){return n._B.product.findMany({where:{OR:[{name:{contains:e}},{article:{contains:e}}],published:!0},take:10})}function c(e,t){return n._B.productSize.create({data:{sizeId:t,productId:e}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[3271,3559,6673,2802,2198,5512],()=>r(56142));module.exports=n})();