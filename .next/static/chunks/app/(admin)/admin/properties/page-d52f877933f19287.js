(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{2364:function(n,t,e){Promise.resolve().then(e.bind(e,7805)),Promise.resolve().then(e.bind(e,9746))},3981:function(n,t,e){"use strict";e.d(t,{Z:function(){return s}});var i=e(7437);e(2265);var a=e(3913),r=e.n(a);function s(n){let{children:t,className:e,...a}=n,s="".concat(r().button," ").concat(null!=e?e:"");return(0,i.jsx)("button",{className:s,...a,children:t})}},6706:function(n,t,e){"use strict";e.d(t,{Z:function(){return o}});var i=e(7437),a=e(7922),r=e(504),s=e(3178),c=e.n(s);function o(n){let{className:t,...e}=n,s="".concat(c().icon," ").concat(t);return(0,i.jsx)(r.G,{className:s,icon:a.r8p,...e})}},5266:function(n,t,e){"use strict";e.d(t,{Z:function(){return o}});var i=e(7437),a=e(7188),r=e(504),s=e(3178),c=e.n(s);function o(n){let{className:t,...e}=n,s="".concat(c().icon," ").concat(t);return(0,i.jsx)(r.G,{className:s,icon:a.Xcf,...e})}},3516:function(n,t,e){"use strict";e.d(t,{Z:function(){return o}});var i=e(7437),a=e(7188),r=e(504),s=e(3178),c=e.n(s);function o(n){let{className:t,...e}=n,s="".concat(c().icon," ").concat(t);return(0,i.jsx)(r.G,{className:s,icon:a.Vui,...e})}},8004:function(n,t,e){"use strict";e.d(t,{Z:function(){return o}});var i=e(7437),a=e(7188),r=e(504),s=e(3178),c=e.n(s);function o(n){let{className:t,...e}=n,s="".concat(c().icon," ").concat(t);return(0,i.jsx)(r.G,{className:s,icon:a.r6l,...e})}},7805:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return u}});var i=e(7437),a=e(1396),r=e.n(a),s=e(4033),c=e(518),o=e.n(c);function u(n){let{page:t,last:e,first:a,start:c,end:u,className:l}=n,d=(0,s.usePathname)(),p=(0,s.useSearchParams)(),h=p.toString().replace(/page=[\w]/gi,"");if(e===a||0===e)return(0,i.jsx)(i.Fragment,{});let f=[];c!==a&&f.push({page:a},{page:"..."});for(let n=c;n<=u;n++)f.push({page:n});return e!==u&&f.push({page:"..."},{page:e}),(0,i.jsx)("div",{className:l,children:(0,i.jsx)("ul",{className:o().pagination,children:f.map(n=>(0,i.jsx)("li",{children:"string"==typeof n.page?(0,i.jsx)("span",{children:n.page}):(0,i.jsx)(r(),{className:"".concat(o().pagination__link," ").concat(n.page===t?o()["pagination__link--active"]:""),href:"".concat(d,"?page=").concat(n.page).concat(h.trim()?"&".concat(h):""),children:n.page})},n.page))})})}},9746:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return x}});var i=e(7437),a=e(6706),r=e(8004),s=e(418),c=e(4241),o=e(2265),u=e(3981),l=e(5266),d=e(3516),p=e(4948),h=e.n(p);function f(n){let{value:t,onUpdate:e,onRemove:a}=n,[s,u]=(0,o.useState)(!1),[p,f]=(0,o.useState)(t.value);return(0,i.jsx)("div",{className:h().value,children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{value:p,onInput:n=>{n.target instanceof HTMLInputElement&&f(n.target.value)}})," ",(0,i.jsx)(r.Z,{onClick:()=>{(0,c.r)("/api/admin/values/".concat(t.id),{method:"PUT",body:JSON.stringify({value:p})},{withMessage:!0}).then(()=>{u(!1),e({...t,value:p})})}})]}):(0,i.jsxs)(i.Fragment,{children:[t.value," ",(0,i.jsx)(l.Z,{onClick:()=>{u(!0)}})," ",(0,i.jsx)(d.Z,{onClick:()=>{(0,c.r)("/api/admin/values/".concat(t.id),{method:"DELETE"},{withMessage:!0}).then(()=>{a(t)})}})]})})}function g(n){let{property:t,onUpdate:e}=n,[s,d]=(0,o.useState)(!1),[p,h]=(0,o.useState)(t.name),[g,x]=(0,o.useState)(null),v=n=>{(0,c.r)("/api/admin/properties/".concat(t.id),{method:"PUT",body:JSON.stringify(n)},{withMessage:!0}).then(n=>{d(!1),e(n.property)})},j=n=>{e({...t,values:t.values.map(t=>t.id===n.id?n:t)})},m=n=>{e({...t,values:t.values.filter(t=>t.id!==n.id)})};return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:t.id}),(0,i.jsx)("td",{children:s?(0,i.jsx)("input",{value:p,onInput:n=>{n.target instanceof HTMLInputElement&&h(n.target.value)}}):t.name}),(0,i.jsxs)("td",{children:[t.values.map(n=>(0,i.jsx)(f,{value:n,onUpdate:j,onRemove:m},n.id)),null===g?(0,i.jsx)(a.Z,{onClick:n=>{x("")}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{value:g,onInput:n=>{x(n.target.value)}})," ",(0,i.jsx)(r.Z,{onClick:()=>{(0,c.W)("/api/admin/properties/".concat(t.id),{method:"PUT",body:JSON.stringify({values:{create:[{value:g}]}})}).then(n=>{x(null),e(n.property)})}})]})]}),(0,i.jsx)("td",{children:(0,i.jsx)(u.Z,{onClick:()=>{v({isFilter:!t.isFilter})},children:t.isFilter?"Убрать":"Добавить"})}),(0,i.jsx)("td",{children:s?(0,i.jsx)(r.Z,{onClick:()=>{v({name:p})}}):(0,i.jsx)(l.Z,{onClick:()=>{d(!0)}})})]})}function x(n){let{properties:t}=n,[e,u]=(0,s.O)(t),[l,d]=(0,o.useState)(null),p=n=>{u(()=>e.map(t=>t.id===n.id?n:t))};return(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{width:"5%"},children:"Id"}),(0,i.jsx)("th",{style:{width:"30%"},children:"Наименование"}),(0,i.jsx)("th",{style:{width:"50%"},children:"Значения"}),(0,i.jsx)("th",{style:{width:"10%"},children:"В фильтре"}),(0,i.jsx)("th",{style:{width:"5%"},children:null===l?(0,i.jsx)(a.Z,{onClick:()=>{null===l&&d("")}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{value:l,onInput:n=>{n.target instanceof HTMLInputElement&&d(n.target.value)}}),(0,i.jsx)(r.Z,{onClick:()=>{(0,c.r)("/api/admin/properties",{method:"POST",body:JSON.stringify({name:l})},{withMessage:!0}).then(n=>{u([n.property,...e]),d(null)})}})]})})]})}),(0,i.jsx)("tbody",{children:e.map(n=>(0,i.jsx)(g,{property:n,onUpdate:p},n.id))})]})}},418:function(n,t,e){"use strict";e.d(t,{O:function(){return a},R:function(){return r}});var i=e(2265);function a(n){let[t,e]=(0,i.useState)(n);return(0,i.useEffect)(()=>{e(()=>n)},[n]),[t,e]}function r(n,t){let[e,a]=(0,i.useState)(n),r=(0,i.useCallback)(n=>{n instanceof Function&&(n=n(e)),localStorage.setItem(t,JSON.stringify(n)),a(n)},[t,e]);return(0,i.useEffect)(()=>{try{var e;a(JSON.parse(null!==(e=localStorage.getItem(t))&&void 0!==e?e:""))}catch(t){a(n)}},[n,t]),[e,r]}},4241:function(n,t,e){"use strict";e.d(t,{W:function(){return a},r:function(){return r}});var i=e(171);async function a(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(async(e,i)=>{n.includes("http")||(n="http://node.local"+n);try{let a=await fetch(n,t);a.ok?e(await a.json()):i(a)}catch(n){if(n instanceof Error&&"AbortError"!==n.name)throw n}})}async function r(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return new Promise(async(n,e)=>{let[r,s,c]=t;a(r,s).then(t=>{var e,a;null!==(e=null==c?void 0:c.withMessage)&&void 0!==e&&e&&(0,i.toast)(null!==(a=t.message)&&void 0!==a?a:"Успешно"),n(t)}).catch(async n=>{if(404===n.status);else{let t=await n.json();(0,i.toast)(t.message)}})})}},3913:function(n){n.exports={button:"Button_button__OFOdO"}},3178:function(n){n.exports={icon:"Icon_icon__goJ4H"}},518:function(n){n.exports={pagination:"Pagination_pagination__MQWKm",pagination__link:"Pagination_pagination__link__IT2AS","pagination__link--active":"Pagination_pagination__link--active__CNTkC"}},4948:function(n){n.exports={value:"ValuePin_value__1MOIR"}},1396:function(n,t,e){n.exports=e(8326)},4033:function(n,t,e){n.exports=e(94)}},function(n){n.O(0,[676,122,893,971,472,744],function(){return n(n.s=2364)}),_N_E=n.O()}]);