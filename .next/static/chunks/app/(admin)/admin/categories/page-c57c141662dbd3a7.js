(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{9036:function(n,t,e){Promise.resolve().then(e.bind(e,7805)),Promise.resolve().then(e.bind(e,7484))},3981:function(n,t,e){"use strict";e.d(t,{Z:function(){return r}});var i=e(7437);e(2265);var a=e(3913),c=e.n(a);function r(n){let{children:t,className:e,...a}=n,r="".concat(c().button," ").concat(null!=e?e:"");return(0,i.jsx)("button",{className:r,...a,children:t})}},6706:function(n,t,e){"use strict";e.d(t,{Z:function(){return o}});var i=e(7437),a=e(7922),c=e(504),r=e(3178),s=e.n(r);function o(n){let{className:t,...e}=n,r="".concat(s().icon," ").concat(t);return(0,i.jsx)(c.G,{className:r,icon:a.r8p,...e})}},5266:function(n,t,e){"use strict";e.d(t,{Z:function(){return o}});var i=e(7437),a=e(7188),c=e(504),r=e(3178),s=e.n(r);function o(n){let{className:t,...e}=n,r="".concat(s().icon," ").concat(t);return(0,i.jsx)(c.G,{className:r,icon:a.Xcf,...e})}},8004:function(n,t,e){"use strict";e.d(t,{Z:function(){return o}});var i=e(7437),a=e(7188),c=e(504),r=e(3178),s=e.n(r);function o(n){let{className:t,...e}=n,r="".concat(s().icon," ").concat(t);return(0,i.jsx)(c.G,{className:r,icon:a.r6l,...e})}},7805:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return u}});var i=e(7437),a=e(1396),c=e.n(a),r=e(4033),s=e(518),o=e.n(s);function u(n){let{page:t,last:e,first:a,start:s,end:u,className:l}=n,d=(0,r.usePathname)(),h=(0,r.useSearchParams)(),f=h.toString().replace(/page=[\w]/gi,"");if(e===a||0===e)return(0,i.jsx)(i.Fragment,{});let p=[];s!==a&&p.push({page:a},{page:"..."});for(let n=s;n<=u;n++)p.push({page:n});return e!==u&&p.push({page:"..."},{page:e}),(0,i.jsx)("div",{className:l,children:(0,i.jsx)("ul",{className:o().pagination,children:p.map(n=>(0,i.jsx)("li",{children:"string"==typeof n.page?(0,i.jsx)("span",{children:n.page}):(0,i.jsx)(c(),{className:"".concat(o().pagination__link," ").concat(n.page===t?o()["pagination__link--active"]:""),href:"".concat(d,"?page=").concat(n.page).concat(f.trim()?"&".concat(f):""),children:n.page})},n.page))})})}},7484:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return h}});var i=e(7437),a=e(418),c=e(4241),r=e(2265),s=e(6706),o=e(8004),u=e(3981),l=e(5266);function d(n){let{category:t,onUpdate:e}=n,[a,s]=(0,r.useState)(!1),[d,h]=(0,r.useState)(t.name);return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:t.id}),(0,i.jsx)("td",{children:a?(0,i.jsx)("input",{value:d,onInput:n=>{n.target instanceof HTMLInputElement&&h(n.target.value)}}):t.name}),(0,i.jsx)("td",{children:t.published?(0,i.jsx)("span",{children:"Опубликовано"}):(0,i.jsx)(u.Z,{onClick:()=>{(0,c.W)("/api/admin/categories/".concat(t.id),{method:"PUT",body:JSON.stringify({published:!0})}).then(()=>{s(!1),e({...t,published:!0})})},children:"Опубликовать"})}),(0,i.jsx)("td",{children:a?(0,i.jsx)(o.Z,{onClick:()=>{(0,c.r)("/api/admin/categories/".concat(t.id),{method:"PUT",body:JSON.stringify({name:d})},{withMessage:!0}).then(()=>{s(!1),e({...t,name:d})})}}):(0,i.jsx)(l.Z,{onClick:()=>{s(!0)}})})]})}function h(n){let{categories:t}=n,[e,u]=(0,a.O)(t),[l,h]=(0,r.useState)(null),f=n=>{u(()=>e.map(t=>t.id===n.id?n:t))};return(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{width:"5%"},children:"id"}),(0,i.jsx)("th",{style:{width:"75%"},children:"Наименование"}),(0,i.jsx)("th",{style:{width:"10%"},children:"Публикация"}),(0,i.jsx)("th",{style:{width:"10%"},children:null===l?(0,i.jsx)(s.Z,{onClick:()=>{null===l&&h("")},title:"Добавить категорию"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{value:l,onInput:n=>{n.target instanceof HTMLInputElement&&h(n.target.value)}}),(0,i.jsx)(o.Z,{onClick:()=>{(0,c.r)("/api/admin/categories",{method:"POST",body:JSON.stringify({name:l})},{withMessage:!0}).then(n=>{u([n.category,...e]),h(null)})}})]})})]})}),(0,i.jsx)("tbody",{children:e.map(n=>(0,i.jsx)(d,{category:n,onUpdate:f},n.id))})]})}},418:function(n,t,e){"use strict";e.d(t,{O:function(){return a},R:function(){return c}});var i=e(2265);function a(n){let[t,e]=(0,i.useState)(n);return(0,i.useEffect)(()=>{e(()=>n)},[n]),[t,e]}function c(n,t){let[e,a]=(0,i.useState)(n),c=(0,i.useCallback)(n=>{n instanceof Function&&(n=n(e)),localStorage.setItem(t,JSON.stringify(n)),a(n)},[t,e]);return(0,i.useEffect)(()=>{try{var e;a(JSON.parse(null!==(e=localStorage.getItem(t))&&void 0!==e?e:""))}catch(t){a(n)}},[n,t]),[e,c]}},4241:function(n,t,e){"use strict";e.d(t,{W:function(){return a},r:function(){return c}});var i=e(171);async function a(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(async(e,i)=>{n.includes("http")||(n="http://node.local"+n);try{let a=await fetch(n,t);a.ok?e(await a.json()):i(a)}catch(n){if(n instanceof Error&&"AbortError"!==n.name)throw n}})}async function c(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return new Promise(async(n,e)=>{let[c,r,s]=t;a(c,r).then(t=>{var e,a;null!==(e=null==s?void 0:s.withMessage)&&void 0!==e&&e&&(0,i.toast)(null!==(a=t.message)&&void 0!==a?a:"Успешно"),n(t)}).catch(async n=>{if(404===n.status);else{let t=await n.json();(0,i.toast)(t.message)}})})}},3913:function(n){n.exports={button:"Button_button__OFOdO"}},3178:function(n){n.exports={icon:"Icon_icon__goJ4H"}},518:function(n){n.exports={pagination:"Pagination_pagination__MQWKm",pagination__link:"Pagination_pagination__link__IT2AS","pagination__link--active":"Pagination_pagination__link--active__CNTkC"}},1396:function(n,t,e){n.exports=e(8326)},4033:function(n,t,e){n.exports=e(94)}},function(n){n.O(0,[676,122,893,971,472,744],function(){return n(n.s=9036)}),_N_E=n.O()}]);